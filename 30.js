"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[30],{6030:(t,e,n)=>{n.r(e),n.d(e,{default:()=>tt});var o=n(13),a=n(9222),i=n(2810),s=n(5818),l=n(9737),r=n(9496),c=n(4699),d=n(5867),u=n(2225),Z=n(4669),m=n(7032),y=n(2991),p=n(9432),h=n(4105);function f(){return(0,h.Z)("PAIRS_UPDATE",p.X)}const k=new class{async getTokenDetailAsync(t){return(await async function(t,e="GET",n){const o=await fetch(`https://vite-api.thomiz.dev/${t.slice(1)}`,{method:e,body:n||null,headers:"POST"===e?{"Content-Type":"application/json"}:{}}),a=await o.text();let i={error:{name:"ServerError",message:"The json returned by the server couldn't be parsed."}};try{i=JSON.parse(a)}catch(t){}if("object"==typeof i&&null!==i&&"error"in i){const t=new Error(i.error.message);throw t.name=i.error.name,t}return i}(`/crypto-info/tokens/${t}/details`)).data}};function g(t){const[e,n]=(0,r.useState)({details:null,type:"loading"});return(0,r.useEffect)((()=>{n({details:null,type:"loading"});let e=!1;return k.getTokenDetailAsync(t).then((t=>{e||n({details:t,type:"ready"})})).catch((t=>{console.error(t),e||n({details:t,type:"error"})})),()=>{e=!0}}),[t]),e}function v(){return(0,h.Z)("TOKEN_INFOS_UPDATE",p.sY)}function T(t){return(0,h.Z)("TOKEN_INFOS_UPDATE_"+t,p.sY.get(t)||{tokenSymbol:t,index:0,decimals:0})}function A(t,e){return 0===e?t:`${t}-${"0".repeat(3-e.toString().length)+e}`}const w=/^\d+(\.\d+)?$/;var B=n(4962),E=n(7767);function b(t){return t.iconURL?(0,o.tZ)("img",{src:t.iconURL,css:{width:56,height:56,borderRadius:"50%"},height:56,width:56,draggable:!1}):null}function C(t){var e,n;let a=v();const i=(0,r.useMemo)((()=>t.tokens?new Map(t.tokens.map((t=>[t.tokenId,t]))):new Map),t.tokens||[]);t.tokens&&(a=i);const s=f();return(0,o.tZ)("div",{css:{display:"flex",gap:10}},(0,o.tZ)("div",{css:{flexGrow:100}},(0,o.tZ)(B.Z,{value:t.tokenId,onChange:e=>{t.setToken(e.target.value)},css:{width:"100%"},disabled:t.disabled},[...t.noPairs?a.keys():s].filter((e=>!(t.exclude||new Set).has(e))).map((e=>{if(t.disableNative&&p.pe===e)return null;if(t.noPairs&&s.has(e))return null;const n=a.get(e);return n?(0,o.tZ)(E.Z,{key:n.tokenId,value:n.tokenId},A(n.tokenSymbol,n.index)," (",n.tokenName,")"):null})))),(null===(e=t.details)||void 0===e?void 0:e.urlIcon)?(0,o.tZ)("div",null,(0,o.tZ)(b,{iconURL:null===(n=t.details)||void 0===n?void 0:n.urlIcon})):null)}var S=n(4196),x=n(6996),I=n(8709);function F(t){const e=t.amount&&!w.test(t.amount);return(0,o.tZ)("div",null,(0,o.tZ)(x.Z,{variant:"outlined",value:t.amount||"",onChange:e=>{const n=e.target.value.replace(/[^\d.]/g,"");t.setAmount(n||null)},label:"Amount",css:{width:"100%"},placeholder:"0.0",error:e,helperText:e?"Invalid Amount":null,InputProps:{endAdornment:(0,o.tZ)(I.Z,{position:"end"},t.ticker)},inputProps:{style:{textAlign:"right"}},disabled:t.disabled}))}var P=n(773),L=n.n(P);function $(t,e=0){const[n,o]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(o(null),console.log(t,p.pe),t==p.pe)return;let e=!1;return p.LJ.methods.getLiquidity.call([t]).then((t=>{e||o(t[1].map)})),()=>{e=!0}}),[t,e]),n}var _=n(6964),R=n(8289),N=n(9558),q=n(1230),D=n(4366),J=n(2907),V=n(4846),Y=n(1088),G=n(9322),O=n(150),H=n(58);function U(t){const e=T(p.pe),n=T(t.token),[a,s]=(0,r.useState)(0),[d,u]=(0,r.useState)(null),Z=(0,_.C)(),[m,y]=(0,r.useState)(0),h=(0,r.useMemo)((()=>[`Deposit ${A(e.tokenSymbol,e.index)}`,`Deposit ${A(n.tokenSymbol,n.index)}`,`Withdraw any ${A(e.tokenSymbol,e.index)} left`].map(((t,e)=>(0,o.tZ)(J.Z,{key:e+""},(0,o.tZ)(V.Z,null,t))))),[]),[f,k]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!Z[0].ready)return t.close()}),[Z[1]]),(0,r.useEffect)((()=>{if(u(null),!Z[0].ready)return;let t=!1;return p.LJ.methods.getVITEBalance.call([Z[0].accounts[0]]).then((e=>{t||u(e[1].map.userBalance)})).catch((t=>{console.error(t),u("0")})),()=>{t=!0}}),[a,Z[1]]),(0,r.useEffect)((()=>{if(!Z[0].ready)return;const t=()=>{s((t=>t+1))},e=Z[0].accounts[0];return N.Z.on(`VITE_BALANCE_UPDATE_${e}`,t),()=>{N.Z.off(`VITE_BALANCE_UPDATE_${e}`,t)}}),[Z[1]]);let g=null;switch(m){case 0:{const n=t.vite.isLessThanOrEqualTo(d||0),a=t.vite.minus(d||0);g=d?(0,o.tZ)(r.Fragment,null,(0,o.tZ)(c.Z,null,n?"You have enough vite in the contract's balance to continue.":`Please deposit ${a.shiftedBy(-e.decimals).toFixed()} ${A(e.tokenSymbol,e.index)}`),(0,o.tZ)(l.Z,{onClick:async()=>{if(n)y(1);else{const t=O.accountBlock.createAccountBlock("send",{address:Z[0].accounts[0],tokenId:p.pe,amount:a.toFixed(0),toAddress:p.LJ.address,data:p.LJ.methods.depositVITE.encodeCall([])});(0,H.C)("Please accept the transaction on your phone!",{type:"info",timeout:3e3,icon:!0});try{await Z[0].sendTransactionAsync({block:t.accountBlock})}catch(t){return console.error(t),void(0,H.C)(`${t.name||t.code}: ${t.message}`,{type:"error",timeout:5e3,icon:!0})}(0,H.C)("Deposit Request sent!",{type:"success",timeout:1e3,icon:!0})}}},n?"Continue":`Deposit ${A(e.tokenSymbol,e.index)}`)):(0,o.tZ)(G.Z,null);break}case 1:g=d?(0,o.tZ)(r.Fragment,null,(0,o.tZ)(c.Z,null,"Please deposit ",t.amount.shiftedBy(-n.decimals).toFixed()," ",A(n.tokenSymbol,n.index)),(0,o.tZ)(l.Z,{disabled:f,onClick:async()=>{try{k(!0);const e=O.accountBlock.createAccountBlock("send",{address:Z[0].accounts[0],tokenId:t.token,amount:t.amount.toFixed(0),toAddress:p.LJ.address,data:t.first?p.LJ.methods.addOriginalLiquidity.encodeCall([t.vite.toFixed(0)]):p.LJ.methods.addLiquidity.encodeCall([])});console.log(e.accountBlock),(0,H.C)("Please accept the transaction on your phone!",{type:"info",timeout:3e3,icon:!0});try{await Z[0].sendTransactionAsync({block:e.accountBlock})}catch(t){return console.error(t),(0,H.C)(`${t.name||t.code}: ${t.message}`,{type:"error",timeout:5e3,icon:!0}),void k(!1)}(0,H.C)("Liquidity Request sent!",{type:"success",timeout:1e3,icon:!0}),await new Promise((t=>setTimeout(t,2e3))),k(!1),y(2)}catch(t){console.error(t)}}},"Deposit ",A(n.tokenSymbol,n.index))):(0,o.tZ)(G.Z,null);break;case 2:{const n=new(L())(d||"0").isGreaterThan(0),a=new(L())(d);g=d?(0,o.tZ)(r.Fragment,null,(0,o.tZ)(c.Z,null,n?`You have ${a.shiftedBy(-e.decimals).toFixed()} ${A(e.tokenSymbol,e.index)} available to withdraw.`:"You don't have anything to withdraw."),(0,o.tZ)(l.Z,{disabled:f,onClick:async()=>{if(n){k(!0);const e=O.accountBlock.createAccountBlock("send",{address:Z[0].accounts[0],tokenId:p.pe,amount:"0",toAddress:p.LJ.address,data:p.LJ.methods.withdrawVITE.encodeCall([d])});(0,H.C)("Please accept the transaction on your phone!",{type:"info",timeout:3e3,icon:!0});try{await Z[0].sendTransactionAsync({block:e.accountBlock})}catch(t){return console.error(t),(0,H.C)(`${t.name||t.code}: ${t.message}`,{type:"error",timeout:5e3,icon:!0}),void k(!1)}(0,H.C)("Withdrawal Request sent!",{type:"success",timeout:1e3,icon:!0}),t.close()}else t.close()}},n?`Withdraw ${A(e.tokenSymbol,e.index)}`:"Continue")):(0,o.tZ)(G.Z,null);break}}return(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Y.Z,{activeStep:m},h),(0,o.tZ)(i.Z,{css:{marginTop:20}},g))}function W(t){const[e,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(n(null),!t.address)return;let e=!1;return t.fetchBalance?t.fetchBalance(t.address,t.tokenId).then((t=>{e||n(t)})):p.Lp.methods.ledger.getAccountInfoByAddress(t.address).then((o=>{var a,i;if(e)return;const s=(null===(i=null===(a=o.balanceInfoMap)||void 0===a?void 0:a[t.tokenId])||void 0===i?void 0:i.balance)||"0";n(s)})),()=>{e=!0}}),[t.address,t.tokenId]),e?(0,o.tZ)("div",{css:{display:"flex",flexDirection:"row"}},(0,o.tZ)("div",{css:{flexGrow:1}}),(0,o.tZ)("div",null,(0,o.tZ)(l.Z,{onClick:()=>{t.setAmount(e)}},(0,o.tZ)(c.Z,{variant:"caption"},"Balance: ",new(L())(e).shiftedBy(-t.decimals).precision(6).toFixed())))):null}function j(){var t,e;const n=(0,y.Z)(),a=f(),s=p.pe,[h,k]=(0,r.useState)(m.re[n].v1.defaultTargetToken),T=v(),A=T.get(s),B=T.get(h),E=g(s),b=g(h),[x,I]=(0,r.useState)(null),[P,J]=(0,r.useState)(null),[V,Y]=(0,r.useState)(0),[G,O]=(0,r.useState)(null),H=$(h,V),j=(0,_.C)(),M=a.has(h)&&A&&B,K=M&&H;return(0,r.useEffect)((()=>{if(null==G)return;const t=()=>{Y((t=>t+1))};return N.Z.on(`RATE_CHANGE_${h}`,t),()=>{N.Z.off(`RATE_CHANGE_${h}`,t)}}),[s,h,G]),(0,r.useEffect)((()=>{x&&w.test(x)&&0===G&&H&&"0"!==H.totalVITE&&J(new(L())(H.total).div(H.totalVITE).times(x).shiftedBy(A.decimals).shiftedBy(-B.decimals).decimalPlaces(B.decimals).toFixed())}),[x,V,H]),(0,r.useEffect)((()=>{P&&w.test(P)&&1===G&&H&&"0"!==H.totalVITE&&I(new(L())(H.totalVITE).div(H.total).times(P).shiftedBy(B.decimals).shiftedBy(-A.decimals).decimalPlaces(A.decimals).toFixed())}),[P,V,H]),(0,o.tZ)(r.Fragment,null,(0,o.tZ)(i.Z,{css:{marginBottom:10}},(0,o.tZ)(c.Z,{variant:"h5"},"Liquidity"),(0,o.tZ)(c.Z,{variant:"caption"},"Add liquidity to a pool")),(0,o.tZ)(d.Z,null),"0"===(null==H?void 0:H.totalVITE)&&(0,o.tZ)(u.Z,{severity:"warning"},"You're the first one providing liquidity. You need to set the rate yourself. Please set an appropriate rate or other traders might profit from the low/high price."),(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,M?(0,o.tZ)(C,{details:b.details,tokenId:h,setToken:t=>{k(t)},disableNative:!0}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},K?(0,o.tZ)(F,{amount:P,setAmount:t=>{O(1),J(t)},ticker:B.tokenSymbol}):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}),(0,o.tZ)(W,{address:null===(t=j[0].accounts)||void 0===t?void 0:t[0],setAmount:t=>{O(1),J(new(L())(t).shiftedBy(-B.decimals).toFixed())},tokenId:h,decimals:(null==B?void 0:B.decimals)||0}))),(0,o.tZ)(i.Z,{css:{marginTop:10,marginBottom:10}},(0,o.tZ)(S.Z,{color:"primary"})),(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,M?(0,o.tZ)(C,{details:E.details,tokenId:s,setToken:()=>{},disabled:!0}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},K?(0,o.tZ)(F,{amount:x,setAmount:t=>{O(0),I(t)},ticker:A.tokenSymbol}):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}),(0,o.tZ)(W,{address:null===(e=j[0].accounts)||void 0===e?void 0:e[0],setAmount:t=>{O(0),I(new(L())(t).shiftedBy(-A.decimals).toFixed())},tokenId:s,decimals:(null==A?void 0:A.decimals)||0}))),x&&w.test(x)&&P&&w.test(P)?(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(c.Z,null,"Rate:"),(0,o.tZ)(c.Z,{color:"ActiveCaption"},new(L())(x).div(P).precision(6).toFixed()," ",A.tokenSymbol," per ",B.tokenSymbol)):null),(0,o.tZ)(d.Z,{css:{marginTop:10,marginBottom:10}}),(0,o.tZ)(i.Z,null,(0,o.tZ)(l.Z,{css:{width:"100%"},disabled:!(K&&w.test(x)&&w.test(P)),onClick:async()=>{j[1]!==_.Z.READY?(0,R.lB)():(0,q.jN)((0,o.tZ)(D.Z,{key:"layer-add-liquidity",close:()=>{(0,q.EV)("layer-add-liquidity")}},(0,o.tZ)(U,{close:()=>{(0,q.EV)("layer-add-liquidity")},amount:new(L())(P).shiftedBy(B.decimals).decimalPlaces(0),vite:new(L())(x).shiftedBy(A.decimals).times("1.001").decimalPlaces(0),token:h,first:"0"===H.totalVITE})))}},j[1]===_.Z.READY?"Add Liquidity":"Connect Wallet")))}function M(){const t=f(),e=v(),[n,a]=(0,r.useState)((()=>[...e.entries()].find((e=>!t.has(e[0])))[1].tokenId)),s=e.get(n),y=e.get(p.pe),h=g(n),k=(0,_.C)(),[T,w]=(0,r.useState)(!1),B=function(){const[t,e]=(0,r.useState)(null);return(0,r.useEffect)((()=>{let t=!1;p.LJ.methods.PAIR_CREATION_FEE.call([]).then((([,n])=>{t||e(n.raw[0])}));const n=t=>{e(t)};return N.Z.on("PAIR_CREATION_FEE_CHANGE",n),()=>{t=!0,N.Z.off("PAIR_CREATION_FEE_CHANGE",n)}}),[]),t}(),E=!!s;return(0,o.tZ)(r.Fragment,null,(0,o.tZ)(i.Z,{css:{marginBottom:10}},(0,o.tZ)(c.Z,{variant:"h5"},"Create Pair"),(0,o.tZ)(c.Z,{variant:"caption"},"Create a pair for your token.")),(0,o.tZ)(d.Z,null),(0,o.tZ)(u.Z,{severity:"warning"},"Please note that for trading, you will have to provide liquidity."),(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,E?(0,o.tZ)(C,{details:h.details,tokenId:n,setToken:t=>{a(t)},disabled:T,disableNative:!0,noPairs:!0,exclude:m.Te}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56})))),(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(c.Z,null,"Pair Creation Fee:"),(0,o.tZ)(c.Z,{color:"ActiveCaption"},B&&new(L())(B).shiftedBy(-y.decimals).toFixed()+" "+A(y.tokenSymbol,y.index)||"Loading..."))),(0,o.tZ)(d.Z,{css:{marginTop:10,marginBottom:10}}),(0,o.tZ)(i.Z,null,(0,o.tZ)(l.Z,{css:{width:"100%"},disabled:T||!B,onClick:async()=>{if(k[1]!==_.Z.READY)(0,R.lB)();else{const t=O.accountBlock.createAccountBlock("send",{address:k[0].accounts[0],tokenId:p.pe,amount:new(L())(B),toAddress:p.LJ.address,data:p.LJ.methods.createNewPair.encodeCall([n])});(0,H.C)("Please accept the transaction on your phone!",{type:"info",timeout:3e3,icon:!0}),w(!0);try{await k[0].sendTransactionAsync({block:t.accountBlock})}catch(t){return console.error(t),(0,H.C)(`${t.name||t.code}: ${t.message}`,{type:"error",timeout:5e3,icon:!0}),void w(!1)}(0,H.C)("Pair Created!",{type:"success",timeout:3e3,icon:!0}),w(!1),await new Promise((t=>setTimeout(t,3e3))),window.location.reload()}}},k[1]===_.Z.READY?"Create Pair":"Connect Wallet")))}var K=n(6215);function z(){var t,e;const n=(0,y.Z)(),a=f(),s=p.pe,[u,h]=(0,r.useState)(m.re[n].v1.defaultTargetToken),k=v(),T=k.get(s),A=k.get(u),B=g(s),E=g(u),[b,x]=(0,r.useState)(null),[I,P]=(0,r.useState)(null),[q,D]=(0,r.useState)(null),[J,V]=(0,r.useState)(0),[Y,G]=(0,r.useState)(null),U=$(u,J),j=(0,_.C)(),[M,z]=(0,r.useState)(!1),X=a.has(u)&&T&&A,Q=X&&U;(0,r.useEffect)((()=>{if(null==Y)return;const t=()=>{V((t=>t+1))};return N.Z.on(`RATE_CHANGE_${u}`,t),()=>{N.Z.off(`RATE_CHANGE_${u}`,t)}}),[s,u,Y]),(0,r.useEffect)((()=>{b&&w.test(b)&&0===Y&&U&&"0"!==U.totalVITE&&(P(new(L())(U.total).div(U.tknSupply).times(b).shiftedBy(18).decimalPlaces(0).shiftedBy(-T.decimals).toFixed()),D(new(L())(U.totalVITE).div(U.tknSupply).times(b).shiftedBy(18).decimalPlaces(0).shiftedBy(-A.decimals).toFixed()))}),[b,J,U]),(0,r.useEffect)((()=>{I&&w.test(I)&&1===Y&&U&&"0"!==U.totalVITE&&(x(new(L())(U.tknSupply).div(U.total).times(I).shiftedBy(T.decimals).decimalPlaces(0).shiftedBy(-18).toFixed()),D(new(L())(U.totalVITE).div(U.total).times(I).shiftedBy(T.decimals).decimalPlaces(0).shiftedBy(-A.decimals).toFixed()))}),[I,J,U]),(0,r.useEffect)((()=>{q&&w.test(q)&&2===Y&&U&&"0"!==U.totalVITE&&(x(new(L())(U.tknSupply).div(U.totalVITE).times(q).shiftedBy(A.decimals).decimalPlaces(0).shiftedBy(-18).toFixed()),P(new(L())(U.total).div(U.totalVITE).times(q).shiftedBy(A.decimals).decimalPlaces(0).shiftedBy(-T.decimals).toFixed()))}),[q,J,U]);const tt={decimals:18,index:0,isOwnerBurnOnly:!0,isReIssuable:!0,maxSupply:"0",owner:p.LJ.address,ownerBurnOnly:!0,tokenId:"tti_lptokentti",tokenName:`${A.tokenSymbol}_${"0".repeat(3-A.index.toString().length)+A.index}-${T.tokenSymbol} LP`,tokenSymbol:`${A.tokenSymbol}${T.tokenSymbol}`,totalSupply:(null==U?void 0:U.tknSupply)||"0"};return(0,o.tZ)(r.Fragment,null,(0,o.tZ)(i.Z,{css:{marginBottom:10}},(0,o.tZ)(c.Z,{variant:"h5"},"Remove Liquidity"),(0,o.tZ)(c.Z,{variant:"caption"},"Withdraw your Liquidity position from a pool")),(0,o.tZ)(d.Z,null),(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,X?(0,o.tZ)(C,{details:E.details,tokenId:u,setToken:t=>{h(t)},disabled:M,disableNative:!0}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},Q?(0,o.tZ)(F,{amount:I,setAmount:t=>{G(1),P(t)},ticker:A.tokenSymbol,disabled:M}):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10,marginBottom:10}},(0,o.tZ)(S.Z,{color:"primary"})),(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,X?(0,o.tZ)(C,{details:B.details,tokenId:s,setToken:()=>{},disabled:!0}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},Q?(0,o.tZ)(F,{amount:q,setAmount:t=>{G(2),D(t)},ticker:T.tokenSymbol,disabled:M}):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10,marginBottom:10}},(0,o.tZ)(K.Z,{color:"primary"})),(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,Q?(0,o.tZ)(r.Fragment,null,(0,o.tZ)(C,{details:null,tokenId:tt.tokenId,setToken:()=>{},disabled:!0,tokens:[tt],noPairs:!0})):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},Q?(0,o.tZ)(r.Fragment,null,(0,o.tZ)(F,{amount:b,setAmount:t=>{G(0),x(t)},ticker:tt.tokenSymbol,disabled:M}),U.lpToken!==m.Ty?(0,o.tZ)(W,{address:null===(t=j[0].accounts)||void 0===t?void 0:t[0],setAmount:t=>{G(0),x(new(L())(t).shiftedBy(-18).toFixed())},tokenId:U.lpToken,decimals:18}):(0,o.tZ)(W,{address:null===(e=j[0].accounts)||void 0===e?void 0:e[0],setAmount:t=>{G(0),x(new(L())(t).shiftedBy(-18).toFixed())},tokenId:U.lpToken,decimals:18,fetchBalance:async t=>p.LJ.methods.getLiquidityTokenBalance.call([t,u]).then((t=>t[1].map.lpBalance||"0"))})):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),b&&w.test(b)&&I&&w.test(I)?(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(c.Z,null,"Rate:"),(0,o.tZ)(c.Z,{color:"ActiveCaption"},new(L())(b).div(I).precision(6).toFixed()," ",T.tokenSymbol," per ",A.tokenSymbol)):null),(0,o.tZ)(d.Z,{css:{marginTop:10,marginBottom:10}}),(0,o.tZ)(i.Z,null,(0,o.tZ)(l.Z,{css:{width:"100%"},disabled:M||!(Q&&w.test(b)&&w.test(I)),onClick:async()=>{if(j[1]!==_.Z.READY)(0,R.lB)();else{const t=O.accountBlock.createAccountBlock("send",{address:j[0].accounts[0],tokenId:U.lpToken===m.Ty?O.constant.Vite_TokenId:U.lpToken,amount:U.lpToken===m.Ty?"0":new(L())(b).shiftedBy(18).toFixed(0),toAddress:p.LJ.address,data:p.LJ.methods.removeLiquidity.encodeCall([u,new(L())(b).shiftedBy(18).toFixed(0)])});(0,H.C)("Please accept the transaction on your phone!",{type:"info",timeout:3e3,icon:!0}),z(!0);try{await j[0].sendTransactionAsync({block:t.accountBlock})}catch(t){return console.error(t),(0,H.C)(`${t.name||t.code}: ${t.message}`,{type:"error",timeout:5e3,icon:!0}),void z(!1)}z(!1),(0,H.C)("Remove Liquidity request sent!",{type:"success",timeout:1e3,icon:!0})}}},j[1]===_.Z.READY?"Remove Liquidity":"Connect Wallet")))}var X=n(9684);function Q(){var t;const e=(0,y.Z)(),n=f(),[a,s]=(0,r.useState)(m.re[e].v1.defaultToken),[u,h]=(0,r.useState)(m.re[e].v1.defaultTargetToken),k=v(),T=k.get(a),A=k.get(u),B=g(a),E=g(u),[b,S]=(0,r.useState)(null),[x,I]=(0,r.useState)(null),[P,q]=(0,r.useState)(0),[D,J]=(0,r.useState)(null),V=$(a),Y=$(u),G=(0,_.C)(),[U,j]=(0,r.useState)(!1),M=n.has(a)&&n.has(u)&&T&&A,K=M&&(a===p.pe||V)&&(u===p.pe||Y),z=(0,r.useCallback)((t=>p.LJ.methods.getConversion.call([a,u,t]).then((t=>t[1].map.returnAmount))),[a,u]),Q=(0,r.useCallback)((t=>p.LJ.methods.getInversedConversion.call([a,u,t]).then((t=>t[1].map.returnAmount))),[a,u]);return(0,r.useEffect)((()=>{if(!b||!w.test(b))return;if(0!==D)return;let t=!1;return z(new(L())(b).shiftedBy(T.decimals).toFixed(0)).then((e=>{t||I(new(L())(e).shiftedBy(-A.decimals).precision(6).toFixed())}),(e=>{t||(console.error(e),I("An error occured"))})),()=>{t=!0}}),[a,b,P]),(0,r.useEffect)((()=>{if(!x||!w.test(x))return;if(1!==D)return;let t=!1;return Q(new(L())(x).shiftedBy(A.decimals).toFixed(0)).then((e=>{t||S(new(L())(e).shiftedBy(-T.decimals).precision(6).toFixed())}),(e=>{t||(console.error(e),S("An error occured"))})),()=>{t=!0}}),[u,x,P]),(0,r.useEffect)((()=>{if(null==D)return;const t=()=>{q((t=>t+1))};return N.Z.on(`RATE_CHANGE_${a}`,t),N.Z.on(`RATE_CHANGE_${u}`,t),()=>{N.Z.off(`RATE_CHANGE_${a}`,t),N.Z.off(`RATE_CHANGE_${u}`,t)}}),[a,u,D]),(0,o.tZ)(r.Fragment,null,(0,o.tZ)(i.Z,{css:{marginBottom:10}},(0,o.tZ)(c.Z,{variant:"h5"},"Swap"),(0,o.tZ)(c.Z,{variant:"caption"},"Trade tokens in an instant")),(0,o.tZ)(d.Z,null),(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,M?(0,o.tZ)(C,{details:B.details,tokenId:a,setToken:t=>{s(t)},disabled:U,exclude:m.Te}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},K?(0,o.tZ)(F,{amount:b,setAmount:t=>{J(0),S(t)},ticker:T.tokenSymbol,disabled:U}):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}),(0,o.tZ)(W,{address:null===(t=G[0].accounts)||void 0===t?void 0:t[0],setAmount:t=>{J(0),S(new(L())(t).shiftedBy(-T.decimals).toFixed())},tokenId:a,decimals:(null==T?void 0:T.decimals)||0}))),(0,o.tZ)(i.Z,{css:{marginTop:10,marginBottom:10}},(0,o.tZ)(l.Z,{onClick:()=>{h(a),s(u),J(0),I(b),S(x)},disabled:U},(0,o.tZ)(X.Z,{css:{transform:"rotate(-90deg)"}}))),(0,o.tZ)(i.Z,null,(0,o.tZ)(i.Z,null,M?(0,o.tZ)(C,{details:E.details,tokenId:u,setToken:t=>{h(t)},disabled:U,exclude:m.Te}):(0,o.tZ)(r.Fragment,null,(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),(0,o.tZ)(i.Z,{css:{marginTop:10}},K?(0,o.tZ)(F,{amount:x,setAmount:t=>{J(1),I(t)},ticker:A.tokenSymbol,disabled:U}):(0,o.tZ)(Z.Z,{variant:"rectangular",height:56}))),b&&w.test(b)&&x&&w.test(x)?(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(c.Z,null,"Rate:"),(0,o.tZ)(c.Z,{color:"ActiveCaption"},new(L())(b).div(x).precision(6).toFixed()," ",T.tokenSymbol," per ",A.tokenSymbol)):null,(0,o.tZ)(i.Z,{css:{marginTop:10}},(0,o.tZ)(c.Z,null,"Slippage Tolerance:"),(0,o.tZ)(c.Z,{color:"Highlight"},"0.5%"))),(0,o.tZ)(d.Z,{css:{marginTop:10,marginBottom:10}}),(0,o.tZ)(i.Z,null,(0,o.tZ)(l.Z,{css:{width:"100%"},disabled:U||!(K&&w.test(b)&&w.test(x)),onClick:async()=>{if(G[1]!==_.Z.READY)(0,R.lB)();else{const t=O.accountBlock.createAccountBlock("send",{address:G[0].accounts[0],tokenId:a,amount:new(L())(b).shiftedBy(T.decimals).toFixed(0),toAddress:p.LJ.address,data:p.LJ.methods.swap.encodeCall([G[0].accounts[0],u,new(L())(x).shiftedBy(A.decimals).times(.995).toFixed(0)])});(0,H.C)("Please accept the transaction on your phone!",{type:"info",timeout:3e3,icon:!0}),j(!0);try{await G[0].sendTransactionAsync({block:t.accountBlock})}catch(t){return console.error(t),(0,H.C)(`${t.name||t.code}: ${t.message}`,{type:"error",timeout:5e3,icon:!0}),void j(!1)}j(!1),(0,H.C)("Swap request sent!",{type:"success",timeout:1e3,icon:!0})}}},G[1]===_.Z.READY?"Trade":"Connect Wallet")))}function tt(){const[t,e]=(0,r.useState)(0);return(0,o.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",marginTop:20,paddingBottom:100}},(0,o.tZ)("div",{css:{display:"flex",flexDirection:"row",gap:100}},(0,o.tZ)(a.Z,{css:{padding:10,width:400},elevation:2},(0,o.tZ)(i.Z,{sx:{borderBottom:1,borderColor:"divider",marginBottom:2}},(0,o.tZ)(s.Z,null,(0,o.tZ)(l.Z,{onClick:()=>e(0)},"Swap"),(0,o.tZ)(l.Z,{onClick:()=>e(1)},"Add Liquidity"),(0,o.tZ)(l.Z,{onClick:()=>e(2)},"Remove Liquidity"),(0,o.tZ)(l.Z,{onClick:()=>e(3)},"Create Pair"))),0===t&&(0,o.tZ)(Q,null),1===t&&(0,o.tZ)(j,null),2===t&&(0,o.tZ)(z,null),3===t&&(0,o.tZ)(M,null))))}}}]);
//# sourceMappingURL=30.js.map